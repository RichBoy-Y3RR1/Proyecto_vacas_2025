<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE jasperReport PUBLIC "-//JasperReports//DTD Report Design//EN" "http://jasperreports.sourceforge.net/dtds/jasperreport.dtd">
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="sales_report" pageWidth="595" pageHeight="842" columnWidth="515" leftMargin="40" rightMargin="40" topMargin="50" bottomMargin="50" uuid="report-1">
  <queryString language="SQL">
    <![CDATA[SELECT e.nombre AS company_name, SUM(c.total) AS ventas, SUM(c.platform_commission) AS comision FROM Compra c JOIN Videojuego v ON c.videojuego_id = v.id JOIN Empresa e ON v.empresa_id = e.id GROUP BY e.nombre]]>
  </queryString>
  <field name="company_name" class="java.lang.String"/>
  <field name="ventas" class="java.math.BigDecimal"/>
  <field name="comision" class="java.math.BigDecimal"/>

  <title>
    <band height="50">
      <staticText>
        <reportElement x="0" y="10" width="515" height="30"/>
        <textElement textAlignment="Center">
          <font size="18" isBold="true"/>
        </textElement>
        <text><![CDATA[Reporte de Ventas y Comisiones]]></text>
      </staticText>
    </band>
  </title>

  <columnHeader>
    <band height="20">
      <staticText>
        <reportElement x="0" y="0" width="200" height="20"/>
        <text><![CDATA[Empresa]]></text>
      </staticText>
      <staticText>
        <reportElement x="200" y="0" width="150" height="20"/>
        <text><![CDATA[Ventas]]></text>
      </staticText>
      <staticText>
        <reportElement x="350" y="0" width="165" height="20"/>
        <text><![CDATA[ComisiÃ³n]]></text>
      </staticText>
    </band>
  </columnHeader>

  <detail>
    <band height="20">
      <textField>
        <reportElement x="0" y="0" width="200" height="20"/>
        <textFieldExpression><![CDATA[$F{company_name}]]></textFieldExpression>
      </textField>
      <textField>
        <reportElement x="200" y="0" width="150" height="20"/>
        <textFieldExpression><![CDATA[$F{ventas}]]></textFieldExpression>
      </textField>
      <textField>
        <reportElement x="350" y="0" width="165" height="20"/>
        <textFieldExpression><![CDATA[$F{comision}]]></textFieldExpression>
      </textField>
    </band>
  </detail>
</jasperReport>
